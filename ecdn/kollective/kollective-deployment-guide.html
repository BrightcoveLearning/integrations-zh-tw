---
title: '集體 eCDN 部署指南'
description: '在本主題中，您將學習如何將 Kollective eCDN 與 Brightcove Player 集成。'
parent: Kollective
---
 <h1>{{page.title}}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

<section class="bcls-section">
<h2 id="Overview">概述</h2>

<p>
  Brightcove已創建了一個集成，以使用以下功能向Brightcove播放器提供視頻點播（VOD）和Brightcove Live事件<a href="https://kollective.com/ECDN-solutions/">萬能eCDN</a>。
</p>

<p>eCDN解決方案有助於將內容交付到公司網絡。當您有大量並發的觀眾在觀看相同內容時（例如在公司辦公室中），它們可以緩解網絡瓶頸。使用eCDN，您可以為每個eCDN服務器實例從源服務器下載一次視頻內容。公司網絡中的查看器通過LAN從eCDN服務器接收內容。 </p>
<p>使用eCDN的一些好處包括：</p>
<ul>
  <li>
    減少企業位置的WAN流量
  </li>
  <li>
    大規模改善觀看體驗
  </li>
  <li>
    降低網絡成本
  </li>
  <li>
    由於eCDN位於公司防火牆後面，因此提高了安全性
  </li>
  <li>
    性能監控
  </li>
</ul>
</section>

<section class="bcls-section">
<h2 id="Requirements">需求</h2>
<p>
  以下要求適用於eCDN插件：
</p>
<ul>
  <li>
    您必須使用Brightcove Player 6.42.2+版本
  </li>
  <li>
    必須提取視頻才能進行動態投放
  </li>
</ul>
</section>

<section class="bcls-section">
<h2 id="Getting_started">開始使用</h2>
<p>
  要使用kollective插件，您需要進行一些初始設置：
</p>
<ol class="bcls-tasklist">
  <li>
    <a href="#Deploying_server_side_application">部署服務器端應用程序</a>
  </li>
  <li>
    <a href="#Installing_the_player_plugin">安裝播放器插件</a>
  </li>
  <li>
    <a href="#Whitelisting_domain_names">將域名列入白名單</a>
  </li>
  <li>
    <p>
      現在，您已經完成了部署步驟，可以開始同步內容並嵌入播放器代碼了。如需詳細資訊，請參閱下列內容：
    </p>
    <ul>
      <li>
          <a href="/ecdn/kollective/kollective-user-guide.html">Kollective eCDN用戶指南</a>
      </li>
    </ul>

  </li>
</ol>
</section>

<section class="bcls-section">
<h2 id="Deploying_server_side_application">部署服務器端應用程序</h2>
<p>後端eCDN應用程序需要部署在您的服務器上。</p>

<h3>服務器要求</h3>
<p>
  以下要求適用於後端應用程序的託管服務器。
</p>
<ul>
  <li>
    NodeJS版本13+
  </li>
  <li>
    託管服務器：Linux或Windows服務器（後端應用程序也可以部署到Heroku）
  </li>
  <li>
    MongoDB數據庫
  </li>
</ul>
<p>
  MongoDB可以與託管服務器位於同一服務器上，也可以位於其他服務器上，或者使用<a href="https://www.mongodb.com/cloud">MongoDB Atlas雲數據庫</a>。
</p>

<h3>設定設定</h3>
<p>
  您將對後端應用程序進行一些配置更改。按著這些次序：
</p>
<ol class="bcls-tasklist-restart">
  <li>
    在後端應用程序部署包的根目錄中，打開<strong>config.env</strong>文件。
  </li>
  <li>
    <p>
      <strong>生產方式</strong> -設置在生產或開發中運行應用程序的模式。
    </p>
    <p>
      任何一個
    </p>
    <pre>
<code class="language-bash" translate="No">NODE_ENV=production</code></pre>
<p>
  或者
</p>
<pre>
<code class="language-bash" translate="No">NODE_ENV=development</code></pre>
  </li>
  <li>
    <p>
      <strong>應用端口</strong> -設置運行應用程序的端口。
    </p>
    <p>
      範例：
    </p>
    <pre>
<code class="language-bash" translate="No">PORT=3000</code></pre>
  </li>
   <li>
    <p>
      <strong>數據庫</strong> -後端應用程序需要MongoDB數據庫。
    </p>
    <p>
      您可以使用以下格式指定數據庫連接：
    </p>
     <pre>
<code class="language-bash" translate="No">DATABASE=mongodb://{host}:{port}/{databaseName}</code></pre>
    <p>
      範例：
    </p>
    <pre>
<code class="language-bash" translate="No">DATABASE=mongodb://localhost:27017/Brightcove</code></pre>
    <p>
      如果要使用MongoDB Atlas雲數據庫，可以按以下方式進行設置：
    </p>
    <pre>
<code class="language-bash" translate="No">DATABASE=mongodb+srv://{user}:{password}@{cluster}/{databaseName}?retryWrites=true&amp;w=majority</code></pre>
<p>
      範例：
    </p>
    <pre>
<code class="language-bash" translate="No">DATABASE=mongodb+srv://myuser:mypassword@cluster0-xafsz.mongodb.net/MyDatabase?retryWrites=true&amp;w=majority</code></pre>
  </li>
  <li>
    <p>
      <strong>電郵服務</strong> -後端應用程序需要電子郵件服務設置才能發送通知電子郵件。
    </p>
    <h5>SendGrid</h5>
    <p>
      要使用SendGrid電子郵件服務發送電子郵件，請在您的SendGrid用戶名和密碼中使用以下內容：
    </p>
    <pre>
<code class="language-bash" translate="No"># Send email using Sendgrid email service.
EMAIL_SERVICE=SendGrid

# Send email using Sendgrid email service.
SENDGRID_USERNAME=<span class="bcls-input">your SendGrid username</span>
SENDGRID_PASSWORD=<span class="bcls-input">your SendGrid password</span>
</code></pre>
    <h5>其他</h5>
    <p>
      要使用其他電子郵件服務發送電子郵件，請對電子郵件服務器主機，端口和用戶名，密碼使用以下命令：
    </p>
    <pre>
<code class="language-bash" translate="No"># Set EMAIL_SERVICE=Other to send email using normal email service using host and port
EMAIL_SERVICE=Other

# Send email using host and port
EMAIL_HOST=<span class="bcls-input">your email host</span>
EMAIL_PORT=<span class="bcls-input">your email port</span>
EMAIL_USERNAME=<span class="bcls-input">your email username</span>
EMAIL_PASSWORD=<span class="bcls-input">your email password</span>
EMAIL_FROM=<span class="bcls-input">your email from address</span>
</code></pre>
  </li>
  <li>
    <p>
      <strong>Kollective Publish API基本URL</strong> -服務器端應用程序調用Kollective發布API，以將來自Brightcove的視頻和視頻源發佈到Kollective，並取回內容令牌。在這裡，您指定Kollective的發布API基本URL：
    </p>
    <pre>
<code class="language-bash" translate="No"># Kollective publish API base url
KOLLECTIVE_PUBLISH_API_BASE_URL=https://content.stage.kollective.app/api
</code></pre>
  </li>
  <li>
    <p>
      <strong>Brightcove API基本URL</strong> -服務器端應用程序需要以下Brightcove API基本URL：
    </p>
    <pre>
<code class="language-bash" translate="No"># Brightcove API base URLs
BRIGHTCOVE_ACCESS_TOKEN_BASE_URL=https://oauth.brightcove.com/v4/access_token
BRIGHTCOVE_CMS_API_BASE_URL=https://cms.api.brightcove.com/v1
BRIGHTCOVE_LIVE_API_BASE_URL=https://api.bcovlive.io/v1
</code></pre>
  </li>
  <li>
    <p>
      <strong>自定義字段名稱</strong> -以下自定義字段名稱設置無法更改：
    </p>
    <pre>
<code class="language-bash" translate="No"># Required custom field names for each Brightcove Account ID
CUSTOM_FIELD_KOLLECTIVE_CONTENT_TOKEN=kollective_content_token
CUSTOM_FIELD_KOLLECTIVE_IS_SYNCHRONIZED=kollective_is_synchronized
CUSTOM_FIELD_KOLLECTIVE_SYNCHRONIZED_TIME=kollective_synchronized_time
CUSTOM_FIELD_KOLLECTIVE_LAST_SYNC_STATUS=kollective_last_sync_status
</code></pre>
  </li>
</ol>

<h3>添加自定義字段</h3>
<p>
  接下來，準備好在Video Cloud Studio中定義必需的自定義字段。
</p>
<ol class="bcls-tasklist">
  <li>
    <p>
      在Video Cloud Studio中，展開<strong>行政</strong>下拉菜單，然後選擇<strong>視頻場</strong>。
    </p>
    <figure class="bcls-figure"><img class="bcls-image--no-border" alt="Video Fields" src="/assets/images/kollective/video-fields.png" />
      <figcaption class="bcls-caption--image">視訊欄位</figcaption>
    </figure>
  </li>
  <li>
    <p>
      在“視頻字段"頁面中，選擇<strong>添加自定義字段</strong>按鈕。
    </p>
    <figure class="bcls-figure"><img class="bcls-image--no-border" alt="Add Custom Field" src="/assets/images/kollective/add-custom-field.png" />
      <figcaption class="bcls-caption--image">添加自定義字段</figcaption>
    </figure>
  </li>
  <li>
    <p>
      在這裡，您將添加Kollective所需的自定義字段。
    </p>
    <figure class="bcls-figure"><img class="bcls-image--no-border" alt="Custom field values" src="/assets/images/kollective/custom-field-values.png" />
      <figcaption class="bcls-caption--image">自定義字段值</figcaption>
    </figure>
    <p>
      每個要用於聯合組織帳戶的Brightcove帳戶ID，都需要定義以下自定義字段名稱，同步才能起作用：
    </p>
    <table class="bcls-table">
      <caption class="bcls-caption--table">布萊特灣信標功能摘要</caption>
      <thead class="bcls-table__head">
        <tr>
          <th style="text-align: center;width:70%;">自定義字段名稱</th>
          <th style="text-align: center;width:30%;">類型</th>
        </tr>
      </thead>
      <tbody class="bcls-table__body">
        <tr>
          <td>kollective_content_token</td>
          <td style="text-align: center;">文本</td>
        </tr>
        <tr>
          <td>kollective_is_synchronized</td>
          <td style="text-align: center;">文本</td>
        </tr>
        <tr>
          <td>kollective_synchronized_time</td>
          <td style="text-align: center;">文本</td>
        </tr>
        <tr>
          <td>kollective_last_sync_status</td>
          <td style="text-align: center;">文本</td>
        </tr>
      </tbody>
    </table>
    <p>
      在“視頻字段詳細信息"頁面中，輸入以下內容：
    </p>
    <ul>
      <li>
        顯示名稱-輸入上表中的自定義字段名稱。分別保存每個字段。
      </li>
      <li>
        內部名稱-這是從“顯示名稱"生成的。
      </li>
      <li>
        離開<strong>類型</strong>作為<strong>文本</strong>
      </li>
      <li>
        進入一個<strong>描述</strong>
      </li>
      <li>
        離開<strong>將此字段為必填項</strong>未選擇選項
      </li>
    </ul>
  </li>
</ol>

<h3>部署應用</h3>
<p>
  在完成所有必需的配置更改並添加了必需的自定義字段之後，您就可以將後端應用程序部署到服務器了。
</p>
<ol class="bcls-tasklist">
  <li>
    將服務器端應用程序包複製到託管服務器上的目標部署文件夾。
  </li>
  <li>
    <p>
      打開控制台應用程序，然後在上一步中轉到應用程序包的根文件夾。執行以下命令以安裝所有必需的Node軟件包：
    </p>
    <pre>
<code class="language-bash" translate="No"># npm install --production
</code></pre>
  </li>
  <li>
    <p>
      執行以下命令以導入默認的超級管理員用戶：
    </p>
    <pre>
<code class="language-bash" translate="No"># npm run import-users
</code></pre>
  </li>
  <li>
    <p>
      要啟動後端應用程序，請執行以下命令：
    </p>
    <pre>
<code class="language-bash" translate="No"># npm run start
</code></pre>
  </li>
  <li>
    <p>
      如果一切設置正確，則可以使用配置的地址在瀏覽器中打開應用程序。
    </p>
    <p>
      範例：
    </p>
    <pre>
<code class="language-bash" translate="No">http://localhost:3000/login
</code></pre>
  </li>
  <li>
    <p>
      使用上面導入的默認超級管理員用戶登錄到應用程序。
    </p>
    <ul>
      <li>
        用戶名：super-admin@brightcove.com
      </li>
      <li>
        密碼：Br1ghtC0ve
      </li>
    </ul>
    <figure class="bcls-figure"><img class="bcls-image--no-border" alt="Server-side login" src="/assets/images/kollective/backend-login.png" />
      <figcaption class="bcls-caption--image">服務器端登錄</figcaption>
    </figure>
  </li>
</ol>
</section>

<section class="bcls-section">
<h2 id="Installing_the_player_plugin">安裝播放器插件</h2>
<p>
  要將Kollective與Brightcove Player集成，請將Kollective插件添加到播放器中。
</p>

	<aside class="bcls-aside bcls-aside--tip">Brightcove Player 版本 v6.45+ 支持 Kollective 插件。</aside>
<p>
      以下步驟詳細說明了使用Video Cloud Studio加載插件。
    </p>

    <ol class="bcls-tasklist-restart">
      <li>
        在Video Cloud Studio中，打開<strong>選手們</strong>模塊，然後創建一個新播放器或找到您要向其添加插件的播放器。
      </li>
      <li>選取播放程式的連結，以開啟播放程式的內容。</li>
      <li>選擇<strong>外掛程式</strong>在左側導航菜單中。</li>
      <li>
        <p>
          接下來，選擇<strong>添加插件</strong>按鈕，然後選擇<strong>Brightcove插件</strong>。
        </p>

        <figure class="bcls-figure">
          <img
            class="bcls-image--no-border"
            alt="Add a Plugin button"
            src="/assets/images/ecdn/kollective/add-a-plugin.png"
          />
          <figcaption class="bcls-caption--image">
            添加插件按鈕
          </figcaption>
        </figure>
      </li>
      <li>
        <p>
          展開<strong>Brightcove插件</strong>下拉菜單，然後選擇<strong>萬能的</strong>。
        </p>

        <figure class="bcls-figure">
          <img
            class="bcls-image--no-border"
            alt="Kollective plugin"
            src="/assets/images/ecdn/kollective/kollective_plugin.png"
          />
          <figcaption class="bcls-caption--image">
            Kollective插件
          </figcaption>
        </figure>
      </li>
  <li>
    <p>
      為了<strong>選項（JSON）</strong>：輸入以下內容：
        </p>
        <ul>
          <li>
            <code translate="No">ksdkUrl</code> -指向<code translate="No">ksdk</code> Kollective的庫-使用您選擇的版本
          </li>
        </ul>
    <pre>
<code class="language-bash" translate="No">{
    &quot;ksdkUrl&quot;: &quot;<span class="bcls-input">ksdk URL</span>&rdquo;
}
</code></pre>
      </li>
    </ul>
  </li>
  <li>
    選擇<strong>保存</strong>按鈕。
  </li>
  <li>
    發布您的播放器。
  </li>
  <li>
	更新/更改來自的嵌入代碼<span class="bcls-input">數據視頻ID</span>至<span class="bcls-input">數據萬能視頻ID</span>。
  </li>
<aside class="bcls-aside bcls-aside--warning">嵌入與 Kollective 集成一起使用的播放器時，您必須更新/更改嵌入代碼<span class="bcls-input">數據視頻ID</span>到<span class="bcls-input">數據集體視頻ID</span> .</aside>
</ol>
</section>

<section class="bcls-section">
<h2 id="Whitelisting_domain_names">將域名列入白名單</h2>
<p>
  Kollective需要將您的域名添加到白名單中，以免出現CORS錯誤。向Kollective提供以下域名：
</p>
<ul>
  <li>
    <p>
      部署服務器端應用程序的域名
    </p>
  </li>
  <li>
    <p>
      部署網頁的域
    </p>
  </li>
</ul>
<p>
  例如，如果您有一個網頁位於<strong>https://my-server.com/my-video-page</strong>將Brightcove Player與Kollective插件配合使用，然後<strong>my-server.com</strong>域需要添加到Kollective白名單中。這將允許在頁面上播放而不會返回CORS錯誤。
</p>
</section>


<!-- <section class="bcls-section">
<h2 id="Limitations">Limitations</h2>

<p>Here are the limitation associated with the thumbnails plugin.</p>

<ul>
	<li>The current version of this plugin does not support thumbnails on mobile devices.</li>
</ul>
</section>

<section class="bcls-section">
<h2 id="Changelog">Changelog</h2>

<p>See the <a href="/plugins/changelog/thumbnails-plugin-changelog.html">changelog here</a>.</p>
</section> -->
</article>